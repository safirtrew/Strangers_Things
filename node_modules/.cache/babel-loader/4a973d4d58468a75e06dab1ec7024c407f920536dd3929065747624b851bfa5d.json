{"ast":null,"code":"import _regeneratorRuntime from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";// import { connectProfile, getUser } from \"./index\";\nimport MessageForm from\"./Messageform\";import{Link}from\"react-router-dom\";import{connectProfile}from\"../api\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Profile(){var token=\"\";var _useState=useState({}),_useState2=_slicedToArray(_useState,2),myInfo=_useState2[0],setMyInfo=_useState2[1];useEffect(function(){token=localStorage.getItem(\"token\");function getMyInfo(){return _getMyInfo.apply(this,arguments);}function _getMyInfo(){_getMyInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return connectProfile(token);case 2:response=_context.sent;setMyInfo(response);case 4:case\"end\":return _context.stop();}},_callee);}));return _getMyInfo.apply(this,arguments);}getMyInfo();},[]);var myInfoMapping=myInfo.data&&myInfo.data.messages&&myInfo.data.messages.length?myInfo.data.messages.map(function(element,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{width:700},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"inboxMessage\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"From: \",element.fromUser.username]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Response to Post: \",element.post.title]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Message: \",element.content]})]})})})},\"Profile\".concat(index));}):/*#__PURE__*/_jsx(\"h2\",{children:\"No messages to display\"});return/*#__PURE__*/_jsxs(\"div\",{id:\"postBorder\",children:[myInfo.data?/*#__PURE__*/_jsxs(\"h1\",{className:\"display-4\",children:[\" Welcome \",myInfo.data.username,\" \"]}):/*#__PURE__*/_jsx(\"h1\",{children:\"Please Login\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Link,{to:\"/NewPost\",children:/*#__PURE__*/_jsx(\"button\",{id:\"allButton\",type:\"button\",className:\"btn btn-dark\",children:\"Create New Post\"})}),/*#__PURE__*/_jsx(Link,{to:\"/Posts\",children:/*#__PURE__*/_jsx(\"button\",{id:\"allButton\",type:\"button\",className:\"btn btn-dark\",children:\"View All Posts\"})}),/*#__PURE__*/_jsx(Link,{to:\"/Logout\",children:/*#__PURE__*/_jsx(\"button\",{id:\"allButton\",type:\"button\",className:\"btn btn-dark\",onClick:function onClick(){localStorage.removeItem(\"token\");},children:\"Log Out\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"h2\",children:\"Message Inbox:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"messageBox\",children:myInfoMapping}),/*#__PURE__*/_jsx(\"hr\",{})]});}","map":{"version":3,"names":["React","useState","useEffect","MessageForm","Link","connectProfile","Profile","token","myInfo","setMyInfo","localStorage","getItem","getMyInfo","response","myInfoMapping","data","messages","length","map","element","index","width","fromUser","username","post","title","content","removeItem"],"sources":["/Users/safirtrew/Desktop/Strangers_Things/my-app/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n// import { connectProfile, getUser } from \"./index\";\nimport MessageForm from \"./Messageform\";\n\nimport { Link } from \"react-router-dom\";\nimport { connectProfile } from \"../api\";\n\nexport default function Profile() {\n  let token = \"\";\n  const [myInfo, setMyInfo] = useState({});\n  useEffect(() => {\n    token = localStorage.getItem(\"token\");\n    async function getMyInfo() {\n      const response = await connectProfile(token);\n      setMyInfo(response);\n    }\n    getMyInfo();\n  }, []);\n  const myInfoMapping =\n    myInfo.data && myInfo.data.messages && myInfo.data.messages.length ? (\n      myInfo.data.messages.map((element, index) => {\n        return (\n          <div key={`Profile${index}`}>\n            <div className=\"card\" style={{ width: 700 }}>\n              <div className=\"card-body\">\n                <div id=\"inboxMessage\">\n                  <h4>From: {element.fromUser.username}</h4>\n                  <h4>Response to Post: {element.post.title}</h4>\n                  <h4>Message: {element.content}</h4>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      })\n    ) : (\n      <h2>No messages to display</h2>\n    );\n\n  return (\n    <div id=\"postBorder\">\n      {myInfo.data ? (\n        <h1 className=\"display-4\"> Welcome {myInfo.data.username} </h1>\n      ) : (\n        <h1>Please Login</h1>\n      )}\n      <hr></hr>\n      <Link to=\"/NewPost\">\n        <button id=\"allButton\" type=\"button\" className=\"btn btn-dark\">\n          Create New Post\n        </button>\n      </Link>\n      <Link to=\"/Posts\">\n        <button id=\"allButton\" type=\"button\" className=\"btn btn-dark\">\n          View All Posts\n        </button>\n      </Link>\n\n      <Link to=\"/Logout\">\n        <button\n          id=\"allButton\"\n          type=\"button\"\n          className=\"btn btn-dark\"\n          onClick={() => {\n            localStorage.removeItem(\"token\");\n          }}\n        >\n          Log Out\n        </button>\n      </Link>\n      <p className=\"h2\">Message Inbox:</p>\n      <div id=\"messageBox\">{myInfoMapping}</div>\n      <hr></hr>\n    </div>\n  );\n}\n"],"mappings":"kaAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD;AACA,MAAOC,YAAW,KAAM,eAAe,CAEvC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,cAAc,KAAQ,QAAQ,CAAC,wFAExC,cAAe,SAASC,QAAO,EAAG,CAChC,GAAIC,MAAK,CAAG,EAAE,CACd,cAA4BN,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAAjCO,MAAM,eAAEC,SAAS,eACxBP,SAAS,CAAC,UAAM,CACdK,KAAK,CAAGG,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,QACvBC,UAAS,uIAAxB,uKACyBP,eAAc,CAACE,KAAK,CAAC,QAAtCM,QAAQ,eACdJ,SAAS,CAACI,QAAQ,CAAC,CAAC,qDACrB,4CACDD,SAAS,EAAE,CACb,CAAC,CAAE,EAAE,CAAC,CACN,GAAME,cAAa,CACjBN,MAAM,CAACO,IAAI,EAAIP,MAAM,CAACO,IAAI,CAACC,QAAQ,EAAIR,MAAM,CAACO,IAAI,CAACC,QAAQ,CAACC,MAAM,CAChET,MAAM,CAACO,IAAI,CAACC,QAAQ,CAACE,GAAG,CAAC,SAACC,OAAO,CAAEC,KAAK,CAAK,CAC3C,mBACE,kCACE,YAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAI,CAAE,uBAC1C,YAAK,SAAS,CAAC,WAAW,uBACxB,aAAK,EAAE,CAAC,cAAc,wBACpB,sBAAI,QAAM,CAACF,OAAO,CAACG,QAAQ,CAACC,QAAQ,GAAM,cAC1C,sBAAI,oBAAkB,CAACJ,OAAO,CAACK,IAAI,CAACC,KAAK,GAAM,cAC/C,sBAAI,WAAS,CAACN,OAAO,CAACO,OAAO,GAAM,GAC/B,EACF,EACF,mBATYN,KAAK,EAUnB,CAEV,CAAC,CAAC,cAEF,oBAAI,wBAAsB,EAC3B,CAEH,mBACE,aAAK,EAAE,CAAC,YAAY,WACjBZ,MAAM,CAACO,IAAI,cACV,YAAI,SAAS,CAAC,WAAW,WAAC,WAAS,CAACP,MAAM,CAACO,IAAI,CAACQ,QAAQ,CAAC,GAAC,GAAK,cAE/D,oBAAI,cAAY,EACjB,cACD,aAAS,cACT,KAAC,IAAI,EAAC,EAAE,CAAC,UAAU,uBACjB,eAAQ,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,UAAC,iBAE9D,EAAS,EACJ,cACP,KAAC,IAAI,EAAC,EAAE,CAAC,QAAQ,uBACf,eAAQ,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,UAAC,gBAE9D,EAAS,EACJ,cAEP,KAAC,IAAI,EAAC,EAAE,CAAC,SAAS,uBAChB,eACE,EAAE,CAAC,WAAW,CACd,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,cAAc,CACxB,OAAO,CAAE,kBAAM,CACbb,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC,CAClC,CAAE,UACH,SAED,EAAS,EACJ,cACP,UAAG,SAAS,CAAC,IAAI,UAAC,gBAAc,EAAI,cACpC,YAAK,EAAE,CAAC,YAAY,UAAEb,aAAa,EAAO,cAC1C,aAAS,GACL,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}