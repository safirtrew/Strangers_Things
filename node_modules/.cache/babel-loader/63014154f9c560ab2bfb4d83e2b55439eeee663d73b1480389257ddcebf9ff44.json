{"ast":null,"code":"import _regeneratorRuntime from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/safirtrew/Desktop/Strangers_Things/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{deletePosts,getPosts}from\"../api/index\";import{MessageForm,Search}from\".\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Posts=function Posts(_ref){var postValue=_ref.postValue,setPostValue=_ref.setPostValue;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var authToken=localStorage.getItem(\"token\")?true:false;var catchId=function catchId(id){setPostValue(id);return postValue;};useEffect(function(){getPosts().then(function(response){var posts=response.data.posts;setPosts(posts);}).catch(function(error){console.log(error);});},[]);function deletePost(_x){return _deletePost.apply(this,arguments);}function _deletePost(){_deletePost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(post_id){var tokens,erase;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:tokens=localStorage.getItem(\"token\");_context.next=3;return deletePosts(tokens,post_id);case 3:erase=_context.sent;navigate(\"/Profile\");return _context.abrupt(\"return\",erase);case 6:case\"end\":return _context.stop();}},_callee);}));return _deletePost.apply(this,arguments);}var postMapping=posts.map(function(post,index){var postId=posts[index]._id;return/*#__PURE__*/_jsx(\"div\",{id:\"postDiv\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:post.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[\"$$$: \",post.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\" \",post.updatedAt]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[\"DESCRIPTION: \",post.description]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-group list-group-light list-group-small\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item px-4\",children:[\"POST BY: \",post.author.username]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(MessageForm,{postId:postId,deletePost:deletePost})}),/*#__PURE__*/_jsx(\"li\",{children:authToken===true?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){catchId(post._id);deletePost(post._id);},type:\"button\",id:\"deletePostButton\",className:\"btn btn-dark\",children:\"Delete Post\"}):/*#__PURE__*/_jsx(Link,{to:\"/Login\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",id:\"loginToViewPost\",children:\"Login to Interact With Posts\"})})})]})]})},\"Posts\".concat(index));});return/*#__PURE__*/_jsxs(\"div\",{id:\"postBorder\",children:[/*#__PURE__*/_jsx(Search,{postMapping:postMapping,posts:posts,setPosts:setPosts}),/*#__PURE__*/_jsx(\"h1\",{className:\"display-4\",children:\"Welcome to Posts!\"}),authToken===true?/*#__PURE__*/_jsx(Link,{to:\"/Profile\",children:/*#__PURE__*/_jsxs(\"button\",{id:\"backToProfile\",type:\"button\",className:\"btn btn-dark\",children:[\" \",\"Back to Profile\",\" \"]})}):null,postMapping,authToken===true?/*#__PURE__*/_jsx(Link,{to:\"/Profile\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-dark\",children:[\" \",\"Back to Profile\",\" \"]})}):null]});};export default Posts;// import { DateTime } from \"luxon\";\n// import { useHistory } from \"react-router-dom\";\n// import classNames from \"classnames\";\n// import styles from \"./Post.module.css\";\n// import buttonStyles from \"../../shared/styles/buttons.module.css\";\n// const Post = ({ post }) => {\n//   const {\n//     createdAt,\n//     author: { username },\n//     title,\n//     location,\n//     _id,\n//   } = post;\n//   const history = useHistory();\n//   return (\n//     <div className={styles.container}>\n//       <h3 className={styles.title}>{title}</h3>\n//       <span>\n//         Listed By:\n//         <span className={styles.lister}>&nbsp;{username}</span>\n//       </span>\n//       <span>\n//         Posted On:\n//         <span className={styles.date}>\n//           &nbsp;{DateTime.fromISO(createdAt).toLocaleString(DateTime.DATE_MED)}\n//         </span>\n//       </span>\n//       <span>\n//         Located At:\n//         <span className={styles.location}>&nbsp;{location}</span>\n//       </span>\n//       <button\n//         className={classNames(buttonStyles.button, styles.view_post)}\n//         onClick={() => {\n//           history.push(`/posts/${_id}`);\n//         }}\n//       >\n//         View Listing\n//       </button>\n//     </div>\n//   );\n// };\n// export default Post;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","deletePosts","getPosts","MessageForm","Search","Posts","postValue","setPostValue","navigate","posts","setPosts","authToken","localStorage","getItem","catchId","id","then","response","data","catch","error","console","log","deletePost","post_id","tokens","erase","postMapping","map","post","index","postId","_id","title","price","updatedAt","description","author","username"],"sources":["/Users/safirtrew/Desktop/Strangers_Things/my-app/src/components/Posts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { deletePosts, getPosts } from \"../api/index\";\nimport { MessageForm, Search } from \".\";\n\nimport \"./App.css\";\n\nconst Posts = ({ postValue, setPostValue }) => {\n  const navigate = useNavigate();\n  const [posts, setPosts] = useState([]);\n  const authToken = localStorage.getItem(\"token\") ? true : false;\n  const catchId = (id) => {\n    setPostValue(id);\n    return postValue;\n  };\n  useEffect(() => {\n    getPosts()\n      .then((response) => {\n        const posts = response.data.posts;\n        setPosts(posts);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n  async function deletePost(post_id) {\n    const tokens = localStorage.getItem(\"token\");\n    const erase = await deletePosts(tokens, post_id);\n    navigate(\"/Profile\");\n    return erase;\n  }\n  const postMapping = posts.map((post, index) => {\n    let postId = posts[index]._id;\n    return (\n      <div id=\"postDiv\" key={`Posts${index}`}>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h5 className=\"card-title\">{post.title}</h5>\n          </div>\n          <div className=\"card-body\">\n            <h5 className=\"card-title\">$$$: {post.price}</h5>\n            <p className=\"card-text\"> {post.updatedAt}</p>\n            <p className=\"card-text\">DESCRIPTION: {post.description}</p>\n          </div>\n          <ul className=\"list-group list-group-light list-group-small\">\n            <li className=\"list-group-item px-4\">\n              POST BY: {post.author.username}\n            </li>\n            <li>\n              <MessageForm postId={postId} deletePost={deletePost} />\n            </li>\n            <li>\n              {authToken === true ? (\n                <button\n                  onClick={() => {\n                    catchId(post._id);\n                    deletePost(post._id);\n                  }}\n                  type=\"button\"\n                  id=\"deletePostButton\"\n                  className=\"btn btn-dark\"\n                >\n                  Delete Post\n                </button>\n              ) : (\n                <Link to=\"/Login\">\n                  <button className=\"btn btn-warning\" id=\"loginToViewPost\">\n                    Login to Interact With Posts\n                  </button>\n                </Link>\n              )}\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  });\n\n  return (\n    <div id=\"postBorder\">\n      <Search postMapping={postMapping} posts={posts} setPosts={setPosts} />\n      <h1 className=\"display-4\">Welcome to Posts!</h1>\n\n      {authToken === true ? (\n        <Link to=\"/Profile\">\n          <button id=\"backToProfile\" type=\"button\" className=\"btn btn-dark\">\n            {\" \"}\n            Back to Profile{\" \"}\n          </button>\n        </Link>\n      ) : null}\n\n      {postMapping}\n\n      {authToken === true ? (\n        <Link to=\"/Profile\">\n          <button type=\"button\" className=\"btn btn-dark\">\n            {\" \"}\n            Back to Profile{\" \"}\n          </button>\n        </Link>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Posts;\n\n// import { DateTime } from \"luxon\";\n// import { useHistory } from \"react-router-dom\";\n// import classNames from \"classnames\";\n// import styles from \"./Post.module.css\";\n// import buttonStyles from \"../../shared/styles/buttons.module.css\";\n\n// const Post = ({ post }) => {\n//   const {\n//     createdAt,\n//     author: { username },\n//     title,\n//     location,\n//     _id,\n//   } = post;\n\n//   const history = useHistory();\n\n//   return (\n//     <div className={styles.container}>\n//       <h3 className={styles.title}>{title}</h3>\n//       <span>\n//         Listed By:\n//         <span className={styles.lister}>&nbsp;{username}</span>\n//       </span>\n//       <span>\n//         Posted On:\n//         <span className={styles.date}>\n//           &nbsp;{DateTime.fromISO(createdAt).toLocaleString(DateTime.DATE_MED)}\n//         </span>\n//       </span>\n//       <span>\n//         Located At:\n//         <span className={styles.location}>&nbsp;{location}</span>\n//       </span>\n//       <button\n//         className={classNames(buttonStyles.button, styles.view_post)}\n//         onClick={() => {\n//           history.push(`/posts/${_id}`);\n//         }}\n//       >\n//         View Listing\n//       </button>\n//     </div>\n//   );\n// };\n\n// export default Post;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}